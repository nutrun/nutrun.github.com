<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
	<head>
		<title>TAB</title>
		
		<style type="text/css" media="screen">
		body {
			background-color: #F1F1F1;
		}
		
		textarea {
			border:1px solid #999999;
			font-family: Consolas, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace;
		}
		</style>
		
		<script type="text/javascript" charset="utf-8">

		var TABLEN = 32;
		var STRING_COUNT = 6;
		var TAB = [];
		var CURRENT_INPUT = [0, 0];
		
		for (var i = 0; i < STRING_COUNT; i++) {
			TAB[i] = [];
			for (var j = 0; j < TABLEN; j++) {
				TAB[i][j] = '-';
			}
		}
		
		function drawtxt() {
			var tabtxt = document.getElementById('out');
			
			var txt = '';
			
			for (var i = 0; i < STRING_COUNT; i++) {
				for (var j = 0; j < TABLEN; j++) {
					txt += TAB[i][j];
				}
				txt += "\n";
			}
			
			tabtxt.value = txt;
		}

		function drawinput() {
			var input = document.getElementById('in');
			
			for (var i = 0; i < STRING_COUNT; i++) {
				var tr = document.createElement("tr");
				for (var j = 0; j < TABLEN; j++) {
					var td = document.createElement("td");
					var inpt = document.createElement("input");
					inpt.type = 'text';
					inpt.size = 1;
					inpt.maxLength = 1;
					inpt.id = i + '_' + j;
					td.appendChild(inpt);
					tr.appendChild(td);
				}
				input.appendChild(tr);
			}
			
			// Update tab every time something is entered in the input
			var inputs = document.getElementsByTagName('input');
			var inputsL = [];

			for (var i = 0; i < inputs.length; i++) {
				inputsL.push(inputs[i]);
			}
			
			inputsL.forEach(function(inpt) {
				var tokens = inpt.id.split('_');

				inpt.oninput = function() {
					TAB[tokens[0]][tokens[1]] = this.value == '' ? '-' : this.value;
					drawtxt();
				}
				
				inpt.onfocus = function() {
					CURRENT_INPUT = [parseInt(tokens[0]), parseInt(tokens[1])];
				}
				
				var slct = function() { this.select(); }
				inpt.onkeyup = slct;
				inpt.onmouseup = slct;
			});
		}
		
		function navigate(e) {
			e = e || window.event;
			
			if (e.keyCode == 37) { // left
				var x = CURRENT_INPUT[0];
				var y = CURRENT_INPUT[1] - 1;
				y = y < 0 ? TABLEN - 1 : y;
				document.getElementById(x + '_' + y).focus();
			} else if (e.keyCode == 38) { // up
				var x = CURRENT_INPUT[0] - 1;
				var y = CURRENT_INPUT[1];
				x = x < 0 ? STRING_COUNT - 1 : x;
				document.getElementById(x + '_' + y).focus();
			} else if (e.keyCode == 39) { // right
				var x = CURRENT_INPUT[0];
				var y = CURRENT_INPUT[1] + 1;
				y = y == TABLEN ? 0 : y;
				document.getElementById(x + '_' + y).focus();
			} else if (e.keyCode == 40) { // down
				var x = CURRENT_INPUT[0] + 1;
				var y = CURRENT_INPUT[1];
				x = x == STRING_COUNT ? 0 : x;
				document.getElementById(x + '_' + y).focus();
			}
		}
		
		function main() {
			drawinput();
			drawtxt();
			document.onkeydown = navigate;
			document.getElementById('out').onmouseup = function() { this.select() };
		}

		window.onload = main;
		
		</script>
	</head>
	<body>
		<p>
			Use the arrow keys (&#8592;, &#8593;, &#8594;, &#8595;) or mouse/trackpad to navigate the tab inputs and enter string numbers: 
		</p>
		<table id="in"></table>
		<br/>
		<label for="out">Copy/paste the tab to share:</label>
		<br/>
		<textarea id="out" rows="8" cols="32"></textarea>
		<br/>
		<br/>
		<a href="http://www.ultimate-guitar.com/lessons/for_beginners/guide_to_tab_notation.html">Guide to tab notation</a>
	</body>
</html>
